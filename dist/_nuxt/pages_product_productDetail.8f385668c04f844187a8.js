/*! For license information please see LICENSES */
webpackJsonp([3],{D4q8:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("ZJWN"),r=i("nHf1"),n=i("QAAC"),s=!1;var l=function(t){s||i("cUqy")},c=Object(n.a)(a.a,r.a,r.b,!1,l,"data-v-5dfa6e3d",null);c.options.__file="pages\\product\\productDetail.vue",e.default=c.exports},SbGX:function(t,e,i){var a,r,n;!function(s){r=[i("L7Pj")],void 0===(n="function"==typeof(a=s)?a.apply(e,r):a)||(t.exports=n)}(function(t){function e(t){this.init(t)}e.prototype={value:0,size:100,startAngle:-Math.PI,thickness:"auto",fill:{gradient:["#3aeabb","#fdd250"]},emptyFill:"rgba(0, 0, 0, .1)",animation:{duration:1200,easing:"circleProgressEasing"},animationStartValue:0,reverse:!1,lineCap:"butt",insertMode:"prepend",constructor:e,el:null,canvas:null,ctx:null,radius:0,arcFill:null,lastFrameValue:0,init:function(e){t.extend(this,e),this.radius=this.size/2,this.initWidget(),this.initFill(),this.draw(),this.el.trigger("circle-inited")},initWidget:function(){this.canvas||(this.canvas=t("<canvas>")["prepend"==this.insertMode?"prependTo":"appendTo"](this.el)[0]);var e=this.canvas;if(e.width=this.size,e.height=this.size,this.ctx=e.getContext("2d"),window.devicePixelRatio>1){var i=window.devicePixelRatio;e.style.width=e.style.height=this.size+"px",e.width=e.height=this.size*i,this.ctx.scale(i,i)}},initFill:function(){var e,i=this,a=this.fill,r=this.ctx,n=this.size;if(!a)throw Error("The fill is not specified!");if("string"==typeof a&&(a={color:a}),a.color&&(this.arcFill=a.color),a.gradient){var s=a.gradient;if(1==s.length)this.arcFill=s[0];else if(s.length>1){for(var l=a.gradientAngle||0,c=a.gradientDirection||[n/2*(1-Math.cos(l)),n/2*(1+Math.sin(l)),n/2*(1+Math.cos(l)),n/2*(1-Math.sin(l))],o=r.createLinearGradient.apply(r,c),d=0;d<s.length;d++){var h=s[d],u=d/(s.length-1);t.isArray(h)&&(u=h[1],h=h[0]),o.addColorStop(u,h)}this.arcFill=o}}a.image&&(a.image instanceof Image?e=a.image:(e=new Image).src=a.image,e.complete?v():e.onload=v);function v(){var a=t("<canvas>")[0];a.width=i.size,a.height=i.size,a.getContext("2d").drawImage(e,0,0,n,n),i.arcFill=i.ctx.createPattern(a,"no-repeat"),i.drawFrame(i.lastFrameValue)}},draw:function(){this.animation?this.drawAnimated(this.value):this.drawFrame(this.value)},drawFrame:function(t){this.lastFrameValue=t,this.ctx.clearRect(0,0,this.size,this.size),this.drawEmptyArc(t),this.drawArc(t)},drawArc:function(t){if(0!==t){var e=this.ctx,i=this.radius,a=this.getThickness(),r=this.startAngle;e.save(),e.beginPath(),this.reverse?e.arc(i,i,i-a/2,r-2*Math.PI*t,r):e.arc(i,i,i-a/2,r,r+2*Math.PI*t),e.lineWidth=a,e.lineCap=this.lineCap,e.strokeStyle=this.arcFill,e.stroke(),e.restore()}},drawEmptyArc:function(t){var e=this.ctx,i=this.radius,a=this.getThickness(),r=this.startAngle;t<1&&(e.save(),e.beginPath(),t<=0?e.arc(i,i,i-a/2,0,2*Math.PI):this.reverse?e.arc(i,i,i-a/2,r,r-2*Math.PI*t):e.arc(i,i,i-a/2,r+2*Math.PI*t,r),e.lineWidth=a,e.strokeStyle=this.emptyFill,e.stroke(),e.restore())},drawAnimated:function(e){var i=this,a=this.el,r=t(this.canvas);r.stop(!0,!1),a.trigger("circle-animation-start"),r.css({animationProgress:0}).animate({animationProgress:1},t.extend({},this.animation,{step:function(t){var r=i.animationStartValue*(1-t)+e*t;i.drawFrame(r),a.trigger("circle-animation-progress",[t,r])}})).promise().always(function(){a.trigger("circle-animation-end")})},getThickness:function(){return t.isNumeric(this.thickness)?this.thickness:this.size/14},getValue:function(){return this.value},setValue:function(t){this.animation&&(this.animationStartValue=this.lastFrameValue),this.value=t,this.draw()}},t.circleProgress={defaults:e.prototype},t.easing.circleProgressEasing=function(t){return t<.5?.5*(t*=2)*t*t:1-.5*(t=2-2*t)*t*t},t.fn.circleProgress=function(i,a){var r="circle-progress",n=this.data(r);if("widget"==i){if(!n)throw Error('Calling "widget" method on not initialized instance is forbidden');return n.canvas}if("value"==i){if(!n)throw Error('Calling "value" method on not initialized instance is forbidden');if(void 0===a)return n.getValue();var s=arguments[1];return this.each(function(){t(this).data(r).setValue(s)})}return this.each(function(){var a=t(this),n=a.data(r),s=t.isPlainObject(i)?i:{};if(n)n.init(s);else{var l=t.extend({},a.data());"string"==typeof l.fill&&(l.fill=JSON.parse(l.fill)),"string"==typeof l.animation&&(l.animation=JSON.parse(l.animation)),(s=t.extend(l,s)).el=a,n=new e(s),a.data(r,n)}})}})},ZJWN:function(t,e,i){"use strict";var a=i("YFWx"),r=void 0;e.a={head:function(){return{title:"生产"}},layout:"layout",data:function(){return{beltlines:[]}},methods:{init:function(){$(".chart-circle").each(function(){var t=$(this);t.circleProgress({fill:{color:"#5eba00"},size:t.height(),startAngle:-Math.PI/4*2,emptyFill:"#F4F4F4",lineCap:"round"})})},getProductDetails:function(){Object(a.a)().get("/beltline").then(function(t){r.beltlines=t.data.data.data.map(function(t){return t.beltline_detail_data.map(function(t){return t.device.latest_run_record&&(t.device.latest_run_record.st_time=t.device.latest_run_record.start_time,t.device.latest_run_record.start_time=window.Core.getRuntime(1e3*parseInt(t.device.latest_run_record.st_time))),t}),t})})}},mounted:function(){i("SbGX"),(r=this).init(),r.getProductDetails(),0!=r.beltlines.length&&setInterval(function(){r.beltlines.forEach(function(t){return t.beltline_detail_data.map(function(t){return t.device.latest_run_record&&(t.device.latest_run_record.start_time=window.Core.getRuntime(1e3*parseInt(t.device.latest_run_record.st_time))),t}),t})},1e3)}}},cUqy:function(t,e,i){var a=i("tT//");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("urRS").default)("597f0212",a,!1,{sourceMap:!1})},nHf1:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return r});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table-list"},[i("h4",{staticClass:"text-center"},[t._v("生产线详情")]),t._l(t.beltlines,function(e,a){return i("div",{staticClass:"card list-item"},[i("div",{staticClass:"table-responsive"},[i("table",{staticClass:"table card-table table-striped table-vcenter"},[i("thead",[i("tr",[i("th",{staticClass:"text-center topheader",attrs:{colspan:"10"}},[t._v(t._s(e.name))])]),t._m(0,!0)]),i("tbody",t._l(e.beltline_detail_data,function(a,r){return i("tr",[i("td",[t._v(t._s(r+1))]),i("td",[t._v(t._s((((a||{}).work_section||[])[0]||{}).name||"暂无"))]),i("td",[t._v(t._s(((a||{}).device||{}||{}).name))]),i("td",[t._v(t._s((((((a||{}).device||{}).latest_run_record||[])[0]||{}).user||{}).name||"暂无"))]),i("td",[t._v(t._s(t.localDate((((a||{}).device||{}).latest_run_record||{}).login_time)))]),i("td",[t._v(t._s((((a||{}).device||{}).latest_run_record||{}).start_time))]),i("td",[t._v(t._s(a.plan_orders))]),i("td",[t._v(t._s(a.finished_orders))]),i("td",[t._v(t._s(a.plan_orders-a.finished_orders))]),i("td",[i("div",{staticClass:"mx-auto chart-circle chart-circle-xs",attrs:{"data-value":e.finishPercent/100,"data-thickness":"3","data-color":"blue"}},[i("div",{staticClass:"chart-circle-value"},[t._v(t._s((a.plan_orders-a.finished_orders)/100*100)+"%")])])])])}))])])])})],2)},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("th",[t._v("序号")]),i("th",[t._v("工段")]),i("th",[t._v("设备")]),i("th",[t._v("操作员")]),i("th",[t._v("登录时间")]),i("th",[t._v("运行时间/h")]),i("th",[t._v("计划完成数")]),i("th",[t._v("已完成数")]),i("th",[t._v("未完成数")]),i("th",[t._v("完成率")])])}];a._withStripped=!0},"tT//":function(t,e,i){(t.exports=i("UTlt")(!1)).push([t.i,".list-item[data-v-5dfa6e3d]{margin-bottom:20px}",""])}});